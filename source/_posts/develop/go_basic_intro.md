---
title: Go语言入门总结:变量定义与运算符
date: 2018-07-02 11:17:10
updated: 2018-07-02 11:17:10
categories:
- 网页开发

tags:
- Go
---
## 前言
梳理总结学习Go语言的笔记。包括：书写Go代码注意事项，常量与变量的定义与初始化，以及关于Go中的操作符相关内容。最后介绍了关于type关键字的用处：定义结构体，定义接口，同时对比type关键字用于重定义类型与用于类型别名时的区别，以及介绍接口变量在运行时的具体变量类型查询以及类型断言的相关内容。

<!-- more -->
## 代码注意事项
- Go语言以包作为管理单位：包内的变量**根据首字母大小写**对包外执行访问控制。
- 每个文件必须先声明所属包。
- **程序必须有一个`main`包**，包含一个唯一的`main()`函数，其作为`go build`的入口。

### 其它
- 数据类型的作用是告诉编译器以多大的内存存储变量
- 多个变量输出，倾向使用格式化输出
    - `%v`：自动匹配格式输出
    - `%+v`：输出结构体时，扩展标志（`%+v`）会添加字段名
    - `%#v`：值的Go语法表示
    - `%T`：值的类型的Go语法表示
    - `%%`：百分号

- `_`是匿名变量，丢弃数据不处理。**通常配合函数处理返回值**
- **常量的自动推导格式不可以使用`:=`，只需要使用`=`**
- `iota`：常量自动生成器，隔行自动累加`1`，给常量赋值使用，每遇到一个新的iota，则重新从0开始计数。
- 兼容类型间才能进行类型转换：Go中的布尔类型与整型不兼容
- `type`关键字给类型起别名：`type 别名=类型名`
- `if`支持初始化语句，初始化语句与判断条件以分号分隔
- `break`用在`for`;`switch`;`select`中

## 变量
### 变量声明
变量的声明也叫做定义；**但是对于函数，函数的定义是关于函数声明的实现！**二者不同。
- `var 变量名 类型`

### 变量初始化
- `var 变量名 类型 = 值`
- `var 变量名 = 值`：**通过初始化的值确定类型**
- `变量 := 值`：**通过初始化的值确定类型**，`:=`为短变量声明符。**不可以用于全局变量**

## 常量
在程序编译阶段就确定下来的值，而在运行时无法改变该值。**常量的声明/定义与初始化是在一起的。**否则报错。

```output
Line 34: Char 13: const declaration cannot have type without expression (solution.go)
Line 34: Char 13: missing value in const declaration (solution.go)
Line 35: Char 17: undefined: a (solution.go)
```
常量可定义为数值、布尔值或字符串等类型。**必须使用`const`关键字对其进行定义/声明。**

- `const 常量名 = 值`
- `const 常量名 类型 = 值`

## 运算符
平级时从左往右进行运算

### 算术运算符
- 对于`++`、`--`，**只有后置运算符**，没有前置运算符。

### 关系运算符
运算值只能是`bool`类型，`true`或`false`。

### 逻辑运算符
- `!`：非
- `&&`：与
- `||`：或

### 位运算符
按位进行操作，注意逻辑运算符与位运算符的不同（符号表示以及操作的对象）。

### 赋值运算符
- `=`：Go中可以进行多变量赋值操作

### 其它运算符
- 通道操作符：`<-`，在函数参数定义处可以对通道数据流向进行限制，其它时候的限制无意义。

## type关键字
- 结构体定义：区分于类型定义于类型别名
    - `type xxx struct {}`
    - 属于类型定义的子集，类型定义还可以是对已有数据类型的重定义，扩展方法集合不会影响到原类型。
    - 类型别名即表示原类型，扩展方法集合会影响到原类型。

- 接口定义：配合结构体定义实现运行时多态
    - `type xxx interface {}`

- 类型定义：定义出来的类型与原类型不同，使用时可以进行强制类型转换，Go语言不存在隐式转换，必须显式转换，并且只能在两种相互兼容的类型间转换。
    - `type xxx string`

- 类型别名：区别于类型定义，其扩展的新方法会影响到原类型，这两种类型的数据可以互相赋值而不需要进行类型转换
    - `type xxx=string`
    - Go源码中的类型别名：`type byte = uint8`，`type rune = int32`

- 类型查询：必须是接口才可以进行类型查询，**需要与类型转换及类型断言进行区别。**
    - `instance.(type)`：instance是接口实例，type即关键字。
        - 只可以作为condition在`switch`中使用，否则报错：`use of .(type) outside type switch`
    - 类型转换：Go中只有显性类型转换，并且只能在两种相互兼容的类型间转换
    - 类型断言：通过接口实例instance获取对应类型的类型值，instance.(instanceType)

## 参考学习资料
- [Go中文文档](https://studygolang.com/pkgdoc)
- [Go学习思维导图](https://www.processon.com/view/link/5a9ba4c8e4b0a9d22eb3bdf0#map)

## Changelog
- 2019/06/10：添加源码中的类型别名例子
- 2019/06/18：重新组织语言，更新前言描述
